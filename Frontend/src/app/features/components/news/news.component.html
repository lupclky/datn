<section class="news">
  <!-- header -->
  <div class="news-header text-center">
    <div class="container">
      <div class="row justify-content-center align-items-center" style="width: 100%;">
        <div class="col-lg-9 col-md-10">
          <h2 class="fw-bold">TIN TỨC</h2>
        </div>
      </div>
    </div>
  </div>

  <!-- content -->
  <div class="news-content d-flex justify-content-center">
    <div class="container" style="margin: 0; width: 100%">
      <div class="row justify-content-between align-items-start">
        <!-- left (hidden on mobile) -->
        <div class="col-md-3 d-none d-md-block news-sidebar">
          <div class="search-box mt-4">
            <div class="input-group">
              <input type="search" class="form-control" placeholder="Tìm kiếm..." 
                     [(ngModel)]="searchKeyword" (keyup.enter)="searchNews()" />
              <button type="button" class="btn btn-danger" (click)="searchNews()">
                <i class="pi pi-search"></i>
              </button>
            </div>
          </div>
          <div class="latest-list my-4">
            <h4 class="text-dark text-start">BÀI VIẾT MỚI NHẤT</h4>
            <div class="latest-items">
              <div *ngFor="let news of latestNews" 
                   class="latest-item" (click)="viewNewsDetail(news.id)" style="cursor:pointer;">
                <img [src]="getImageUrl(news.featured_image)" [alt]="news.title" />
                <div class="latest-content">
                  <p class="title">{{ getTruncatedTitle(news.title, 60) }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- right -->
        <div class="col-12 col-md-9 news-content-shoes">
          <div *ngIf="isLoading" class="text-center my-5">
            <div class="spinner-border text-danger" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>

          <div *ngIf="!isLoading && newsList.length === 0" class="text-center my-5">
            <p class="text-muted">Không tìm thấy tin tức nào.</p>
          </div>

          <div *ngIf="!isLoading && newsList.length > 0" class="row my-4 g-4 news-grid">
            <div *ngFor="let news of newsList" class="col-12 col-sm-6 col-lg-4">
              <article class="news-card" (click)="viewNewsDetail(news.id)">
                <div class="thumb">
                  <img [src]="getImageUrl(news.featured_image)" [alt]="news.title" loading="lazy" />
                  <div *ngIf="news.published_at" class="date-badge">
                    <span class="day">{{ formatDate(news.published_at).day }}</span>
                    <span class="month">Th{{ formatDate(news.published_at).month }}</span>
                  </div>
                </div>
                <div class="content">
                  <h3 class="title">{{ getTruncatedTitle(news.title, 80) }}</h3>
                  <p class="summary">{{ getTruncatedSummary(news.summary, 120) }}</p>
                  <div class="meta"><i class="pi pi-eye"></i> {{ news.views }} lượt xem</div>
                </div>
              </article>
            </div>
          </div>

          <!-- Pagination -->
          <div *ngIf="!isLoading && totalPages > 1" class="row my-4">
            <div class="col-12 d-flex justify-content-center">
              <nav>
                <ul class="pagination">
                  <li class="page-item" [class.disabled]="currentPage === 0">
                    <a class="page-link" (click)="previousPage()" style="cursor: pointer;">Trước</a>
                  </li>
                  <li class="page-item active">
                    <span class="page-link">{{ currentPage + 1 }} / {{ totalPages }}</span>
                  </li>
                  <li class="page-item" [class.disabled]="currentPage >= totalPages - 1">
                    <a class="page-link" (click)="nextPage()" style="cursor: pointer;">Sau</a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>